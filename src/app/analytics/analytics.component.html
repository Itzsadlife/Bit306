<merchant-navbar></merchant-navbar>

<div class="container mt-4">
    <h1 class="text-center">Analytics Reports</h1>
    
    <!-- Menu for selecting report type -->
    <div class="menu mt-3">
      <label class="mr-2">Select Report Type:</label>
      <select [(ngModel)]="selectedReportType" (change)="onReportTypeChange()" class="form-select">
        <option value="products">Products Sold</option>
        <option value="customers">Customer Purchasing Power</option>
      </select>
    </div>

    <!-- Report display -->
    <div class="report mt-4 p-3 rounded">
      <h2 class="text-center">Analytics Report</h2>
      <p class="text-center">Filtered by: {{ selectedReportType }}</p>

      <!-- Display analytics report data using ngx-charts -->
      <ngx-charts-bar-vertical
        *ngIf="chartData.length"
        [view]="[700, 300]"
        [scheme]="'vivid'"
        [results]="chartData"
        [gradient]="false"
        [xAxis]="true"
        [yAxis]="true"
        [legend]="true"
        [showXAxisLabel]="true"
        [showYAxisLabel]="true"
        [xAxisLabel]="selectedReportType === 'products' ? 'Product' : 'Customer'"
        [yAxisLabel]="selectedReportType === 'products' ? 'Sales' : 'Spending'">
      </ngx-charts-bar-vertical>

      <!-- Optionally, keep the table if you want both table and chart -->
      <!-- <div class="report-data"> -->
      <!--   ... existing table ... -->
      <!-- </div> -->
    </div>
</div>
